# 2021/1

## 08
[ポートフォリオのアプリを公開したらイタズラされまくった話 \- Qiita](https://qiita.com/nasuB7373/items/10bebd8e9f0b3331f348)

### 悪意ある利用者の存在と対策
私自身が学生の際に大学の図書館の紹介と図書のレビューサイト作成したことがあるということもあり興味を持ちました。  

キータ投稿者がウェブアプリを公開した際に発生した問題について考える。

1. 不適切な投稿
2. システムを穴を突こうとする行為
3. XSS

**1**はウェブサイトなどにはよくあるものでNGワードなどを設定するなどの対策が予想されます。  
**2**はChrome等のデベロッパーツールなど使用したHTMLの改ざんなど、コードなどユーザーのいじれない内部で適切なロックを掛ける。  
**3**はウェブサイト側で悪意あるスクリプトを実行しようとするというもので、「<」や「>」を無効化する処理が必要になる。

## 18
[ぐるぐるSQLは止めてくださいという話 \- Qiita](https://qiita.com/abe_masanori/items/1a2b9c1f1069c43237f8)

### ループ処理を利用したSQL実行
PGによってはループ処理を使用してSQLを実行しているものがあるが、  
実行回数が多くなることや、ループ処理の実行時間などの影響で得られる結果に対して合計実行時間が長くなりやすい。

そのことからループ処理を利用したSQL実行は、複雑な処理でやむを得ない場合を除いてなるべくSQL一本で実行することで速度が格段に上がる。

### まとめ
* PG側のSQLの実行の仕方によっても抽出結果を得られる速度が変わる。
* なるべく一度に必要な結果を得られるSQLを実行した方が時間的ロスが少ない。

## 25
[\[フロントエンド\] うわっ…Componentの凝集度、低すぎ？ \- Qiita](https://qiita.com/aki202/items/b279fa8097dde82e2730)

### 凝集度
PGを構成するメソッドなどを部品として考える。  
そしてその部品が一貫した機能を持ちきれいにまとまっている状態を**凝集度が高い状態**と呼ぶ。


### 凝集度が下がる瞬間(jsの場合)

```js
// ユーザーのプロフィールを表示する。
const Profile = ({user: UserModel}) => {
  return (
    <>
      <img src={user.avatar} />
      <h2>Hi, I'm {user.name}.</h2>
    <>
  )
}
```
上はユーザーのプロフィールを表示するコンポーネント。  
下はユーザーのプロフィールと同時に友達リストを表示するコンポーネントとなっている。  

下は友達リストを表示するしないの分岐がある影響で**凝集度が低下**している。この場合に凝集度を高く保つためには「ユーザープロフィール表示する機能」と「友達リストを表示する機能」に分けてコンポーネントを作成する必要があった。
``` js
const Profile = ({user: UserModel, shouldShowFriends: bool}) => {
  // 友達リストのNodeを生成する関数
  const showFriends = () => {
    // 非表示ならreturn null
    if (!shouldShowFriends) return null

    // 表示するなら友達をロードしてNodeを生成
    const friends: FriendModel[] = loadFriends(user.id)
    return (
      <ul>
        {friends.map(friend => <li key={friend.id}>{friend.name}</li>)}
      </ul>
    )
  }

  return (
      // ユーザーのプロフィールを表示する。
    <>
      <img src={user.avatar} />
      <h2>Hi, I'm {user.name}.</h2>
      {showFriends()}
    <>
  )
}
```

### まとめ
* ひとつの部品に多くの機能を担当させてしまうと凝集度が低下してしまう。
