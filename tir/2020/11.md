# 2020/11

## 02
[小学生時代の僕へ、「OCRで【いつもの作業】やっておいたよ！」 \- Qiita](https://qiita.com/sasao3/items/307c40c6b8f3aecc3e7c)

### PGの詳細(続き)
```js
function highlight(result) {
    const ngWords = ['そらまめ', 'ひよこまめ', 'えだまめ', 'なっとう'];
    let resultHtml = result.text.replace(new RegExp('会', 'g'), '金'); //「金」を「会」と誤認してしまうため置き換える

    //NGワードにハイライト用のクラスをつける
    for (let i = 0; i < ngWords.length; i++) {
        resultHtml = resultHtml.replace(new RegExp(ngWords[i], 'g'), '<span class="highlight">' + ngWords[i] + '</span>');
    }

    return resultHtml;
}
```
上記の処理はOCR解析を行い、データとして取り込んたリスト(変数：result)に対して指定の文字を強調表示するためのもの。

### PG結果
ある程度記事の本目的であった、NG献立の強調表示ができた。  
しかし、複雑な表や漢字などが入り乱れる表などの認識は難しい。  
qiita投稿者は簡易な表に手で加工しなおしてからPGで処理している。



### OCRの精度を上げるためには

読み込むリスト側で改善

* 文字サイズを大きくする
* 高解像度の画像を使用する

OCR側の調整

* ブラックリストとホワイトリストの活用