# 2020/08

## 03
[C\+\+の参照とRustの参照 \- Qiita](https://qiita.com/termoshtt/items/3e3175a66c96219dcf17)

### C++とRust
Rustはプログラミング言語でC++の後継と言われている。

### c++の参照とRustの参照の違い
構造体Aの参照をメイン関数で受け取り、参照元を解放する。  
再度使おうとすると異常値が返ってくる。

同じ処理をRustで作成するとエラーとして解釈、表示してくれる。

```c++
//c++
class A {
    std::string name;
public:
    A(std::string name): name(name) {}
    const std::string& get_name() const {
        return this->name;
    }
};

int main() {
    A* a = new A("a");
    auto& name_ref = a->get_name();
    delete a;

    std::cout << name_ref << std::endl;
    return 0;
}
```
### まとめ
Rustはc++と違い、参照の生存期間を推論してくれる。  
事前にエラーとして解釈してくれるのでc++では危険だった参照が扱いやすくなる。

## 04
[C\# で Json を扱う \- Qiita](https://qiita.com/R_TES_/items/de715ad1c541a9fcf5b7)

### jsonとは
データ記述言語の一つ。拡張子は.json。  
データの中身は定められた記法によって記述されている。

### 前準備
NuGetパッケージから「System.Text.Json」をインストールする。

```c#
// 変換用クラス
public class Hoge
{
    public int id { get; set; }
    public string name { get; set; }
}
```

```c#
// json中身
{
    "id": 1,
    "name": "hoge"
}
```

### 実行すること
- jsonデータをクラスに取り込む(デシリアライズ)
- クラスの内容をjson文字列にする(シリアライズ)

### 不明点
- 一般的にどう扱われるか
- デシリアライズとシリアライズとは

## 05
[SNMPでWIFIルーターの電波OFFをする \- Qiita](https://qiita.com/k112358/items/67f880c319d534c4acc5)

### SNMPとは
ネットワーク機器を管理するために使用されるプロトコル。  
リモートでルーターの電波をon/offなどできる。

### 必要なもの

- SNMP
- MIBファイル：ルーターの各設定が記述されたファイル

ツール
- TWSNMP：MIBファイルの解読に使用
- snmpwalk：コマンドラインで設定の読み出しや変更を行うためのもの
- SharpSnmp：SNMPを行うためのライブラリ

### まとめ
SNMPを使用すればプログラム上で遠隔からルーターの操作ができる。

## 06
[画像認識の定番データセットImageNetはもう終わりか \- Qiita](https://qiita.com/omiita/items/e1e377f30f624ad705b2)

### ImageNetとは
大量の画像と意味が入っているデータセットのこと。  
全体に公開されていて、主に画像認識に使用される。

### ImageNetで発生する問題
初期からあるデータセットであるせいか、最新のものと比べると精度が低い。  
理由は1つの画像に対する意味を表す「ラベル」が複数存在すること。  
原因は過学習で誤ったラベルやデータの偏りが生まれてしまっている。

### 解決方法
ラベルの再評価を行う。

### まとめ
ImageNetは昔から多用されてきたデータセットであったが、  
ある程度使用できるレベルにするためには加工が必要なため  
**画像認識の定番としての使用はそろそろ厳しい。**  
しかし、ラベルの再評価を行えばまだ利用はできる。

## 07
[オンライン・シャッフルランチを支える技術 \- Qiita](https://qiita.com/satto_sann/items/f93aa1253129d5154be0)

### オンライン・シャッフルランチ
お昼時に社員の交流のためにリモートで会話する。  

そのグループ分けとイベントの予定日を各社員のGoogleカレンダーに  
登録を一度に行うためのシステムの作成。

### 方法
GAS(Google Apps Script)Googleが提供しているJavaScriptベースの開発環境を使用することで  
Googleカレンダーへの操作が可能になる。

- スプレッドシートに「カレンダーID」と「メンバーのメールアドレス」を**test**という名前で保存
- 作成したスプレッドシートのスクリプトエディタからコードを記述

カレンダーへの操作にはIDが必要、各メンバーのカレンダーへのイベント追加にはメールアドレスが必要となっているため保存。

### グループ
3人1グループ、余った場合は4人。人数が少ない場合はグループ化しない。

```c#
// ユーザのEmailアドレスをシートから取得
const emails = sheet.getRange(2, 1, sheet.getLastRow() - 1).getValues();
```

このときメールアドレスは配列として変数に格納される。  
しかし、カレンダーへの登録に使用するにはフォーマットする必要がある。

```c#
// Calendar API用にフォーマット
const formatedEmails = shuffle(emails).map(email => ({'email': email[0]}));
```
ランダム関数などでシャッフルする。
配列にネストを行いグループ化を表現する。

### カレンダーに登録
「Calendar.Events.insert」を使用してカレンダーへのイベント登録が可能。

### まとめ
GASを使用することでスプレッドシートやカレンダーへの操作を行うプログラムの作成が可能。  

## 11
[C\#によるPOSレジ・サーマルプリンター開発入門（的な） 記事一覧 \- Qiita](https://qiita.com/Automatic9045/items/0c8d05e1aa6255f7bd1c)

[開発用にPOS機器を購入する時のポイント \- Qiita](https://qiita.com/Automatic9045/items/adca1d0995022bae2fa1)

### POS機器(パソコンPOS用)
- サーマルプリンター：レシート印刷を行う機器
- キャッシュドロア：お金を入れるための引き出し
- カスタマーディスプレイ：読み取った商品の金額を表示する機器

機器購入時は、信頼性や日本語フォントがある日本製品にする。

### PCとの接続方式
- シリアル接続
- パラレル接続
- USB接続
- LAN接続

### POS機器注意点
- サーマルプリンターにレシートを自動で切る機能があるか
- 対応OS
- ドライバーが無料公開されているか

## 12
[\[サーバレス\] Googleスプレッドシートでスクレイピング \- Qiita](https://qiita.com/mogya/items/dedbbaec39447e74a124)

### gasを使ったスクレイピング
Googleスプレッドシートのgasというスクリプト機能を使って  
外部のウェブサイトから情報を取得する。

### 方法
ImportXMLメソッドというURLとXPathを元に  
ウェブサイトの該当箇所の情報を取得するメソッドと  
Googleスプレッドシートのタイマー機能を使用して決まった時間に実行する。

## 17
[ゲームでよくされるチート手法とその対策 〜アプリケーションハッキング編〜 \- Qiita](https://qiita.com/taptappun/items/b759df240c919d55c408)

### アプリケーションハッキングとは
利用者側で行われるハッキングのこと

### 手法
- ボタン連打
- 逆コンパイル
- メモリ改ざん

### 対策
トランザクション処理や悲観的ロックなどを用いてボタン連打の防止。  
利用者が確認できる場所でのLogは解析を防ぐために全ての情報は載せない。

### まとめ
不正を行う人間がどの様にセキュリティの穴を突くのか知ることができた。また、それを防ぐための技術や仕組みなどについても少し知ることができた。

## 18
[MySQLで3億レコード物理削除した話 \- Qiita](https://qiita.com/ningenMe/items/57bd66359d89b691ba0d)

### 大量のレコード削除
あまりにも大量のレコードをテーブルから削除しようとするとDBに負荷が掛かり、うまく動作しない。

この記事ではレコード削除より、テーブル自体を削除するSQLの方が軽いということで  
削除用のテーブルへレコードをinsertしてテーブル削除を行った。

### まとめ
高い頻度でデータが膨らみ、必要箇所が一部分のテーブルは  
ローテート処理(一定の期間で不要なデータを削除する処理)を使用する。